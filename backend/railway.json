{
	"$schema": "https://railway.com/railway.schema.json",
	"build": {
		"builder": "NIXPACKS",
		"buildCommand": "cd backend && npm install && npm run build && /opt/venv/bin/pip install --upgrade pip && /opt/venv/bin/pip install --no-cache-dir --extra-index-url https://download.pytorch.org/whl/cpu -r dist/resemblyzer/requirements.txt",
		"watchPatterns": ["backend/**"],
		"nixpacksPlan": {
			"providers": ["node", "python"]
		}
	},
	"deploy": {
		"startCommand": "cd backend && npm run start",
		"healthcheckPath": "/health"
	}
}
